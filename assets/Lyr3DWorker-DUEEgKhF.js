import{e as p}from"./Lyr3DModule-DHEf2Kt7.js";import"./index-Dqeu25xh.js";let o,e;async function m(s){await f();const t={status:1,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(s.inputs.length<1)return{result:t,transferList:[]};const i={ptrs:[],sizes:[]};for(const n of s.inputs){const c=e._malloc(n.byteLength);new Uint8Array(e.HEAPU8.buffer,c,n.byteLength).set(new Uint8Array(n)),i.ptrs.push(c),i.sizes.push(n.byteLength)}const r=e.process(s.jobDescJson,s.id,i,s.isMissingResourceCase);t.status=r.status,t.missingInputUrls=r.missingInputUrls.slice();const u=r.status===0&&r.data,l=t.status===2&&t.missingInputUrls.length>0;t.jobDescJson=r.jobDescJson.slice(),t.error=r.error.slice(),u?t.data=r.data.slice():l&&(t.originalInputs=s.inputs.slice());for(let n=0;n<i.ptrs.length;++n)e._free(i.ptrs[n]);const a=[];if(u)a.push(t.data.buffer);else if(l)for(const n of s.inputs)a.push(n);return{result:t,transferList:a}}async function h(s){await f(),e.add_spatial_reference_info(s.sr,s.isGCS,s.toMetersXY,s.toMetersZ)}function y(){e&&(e.uninitialize_lyr3d_worker_wasm(),e=null)}function f(){return e?Promise.resolve():(o||(o=p().then(s=>{e=s,e.initialize_lyr3d_worker_wasm(),o=null})),o)}export{h as addSpatialReferenceInfo,y as destroyWasm,f as initialize,m as process};
