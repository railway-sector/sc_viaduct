import{n as e,u,cV as c,p as i,bg as v,gO as m,ad as y,d8 as d,iW as _,kb as w,e as g}from"./index-cm-L_i_x.js";import{n as f}from"./AnalysisView-DlMWLXEM.js";import{o as V,l as D,i as P,a as b,k as z,n as k,u as T,b as $,L as O}from"./ElevationProfileTool-CeGAOrPh.js";import{l as S}from"./throttle-D7qRbxr_.js";import{n as U}from"./GraphicsLayer-BtHEgxVO.js";import"./createUtils-a-2xgohy.js";import"./distanceOperator-DoxUjUBK.js";import"./Point2D-Du6jZy4Y.js";import"./Distance2DCalculator-CXhBP-8I-DuijEXcP.js";import"./ProjectionTransformation-CkPeduB_.js";import"./Envelope2D-B1YlPmej.js";import"./Transformation2D-C7RgHm9s.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./apiConverter-Cx7GsfWr.js";import"./jsonConverter-Cu6ikvP9.js";import"./simplifyOperator-XpxB82t3.js";import"./operatorSimplify-CIfuzd0b.js";import"./ExclusiveOperationManager-ExxUm8We.js";import"./SketchViewModel-1STrh89G.js";import"./isSupportedObject-DCpczpLA.js";import"./SketchOptions-BqPf9L49.js";import"./SnappingManager-DV_P_4qe.js";import"./euclideanLengthMeasurementUtils-Bb48Lb13.js";import"./geometry2dUtils-Bz3wcA0r.js";import"./geodeticLengthOperator-BCpzIDMo.js";import"./geodeticCurveType-CirnHLSB.js";import"./automaticAreaMeasurementUtils-BmTS2D0y.js";import"./geodesicAreaMeasurementUtils-LvRNMasD.js";import"./earcut-D9gy186-.js";import"./automaticLengthMeasurementUtils-ZZVNmd7d.js";let h=class extends f{};h=e([u("esri.views.2d.analysis.AnalysisView2D")],h);let n=class extends c{constructor(t){super(t)}initialize(){this.addHandles(V({analysisViewData:this.analysisViewData,remove:()=>{},show:()=>{}}))}get updating(){return!1}};e([i({constructOnly:!0})],n.prototype,"view",void 0),e([i({constructOnly:!0})],n.prototype,"analysisViewData",void 0),e([i()],n.prototype,"updating",null),n=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileInputVisualization2D")],n);let a=class extends c{constructor(t){super(t),this._graphic=new v,this._layer=new U({listMode:"hide",internal:!0}),this._updateGeometryThrottled=S(r=>{if(!r)return void(this._graphic.visible=!1);const o=this._layer,l=this.view.map?.layers;l&&(l.includes(o)||l.add(o),l.reorder(o,0)),this._graphic.visible=!0,this._graphic.geometry=D(r.samples,r.spatialReference)},P().profileLinesUpdateThrottleMillis)}initialize(){this._layer.add(this._graphic),this.addHandles([m(()=>!this.analysisViewData.visible,()=>{this._graphic.visible=!1}),y(()=>this._colorUpdateParameters,t=>this._updateColor(t),d),y(()=>this.analysisViewData.analysis.geometry,()=>{this._graphic.visible=!1},d),y(()=>this._geometryUpdateParameters,t=>this._updateGeometryThrottled(t),d),this._updateGeometryThrottled])}destroy(){this.view.map?.remove(this._layer),this._layer.destroy(),this._graphic.destroy()}get updating(){return this._updateGeometryThrottled.hasPendingUpdates()}get _result(){const{analysisViewData:t}=this;return t.visible?t.results.find(({available:r,computation:o,rawResult:l})=>r&&o.profile.viewOptions.lineVisible&&l?.hasZ===!0):null}get _geometryUpdateParameters(){const t=this._result;return t?.progress!==1?null:{samples:t.samples,spatialReference:this.view.spatialReference}}get _colorUpdateParameters(){const t=this._result?.computation.profile.color;return t?{color:t.toArray(),contrastColor:_(t).toArray()}:null}_updateColor(t){t&&(this._graphic.symbol=new w({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",capStyle:"Butt",color:t.color,effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],joinStyle:"Round",width:1.5},{type:"CIMSolidStroke",capStyle:"Butt",color:t.contrastColor,joinStyle:"Round",width:1.5}]}}}))}};e([i({constructOnly:!0})],a.prototype,"view",void 0),e([i({constructOnly:!0})],a.prototype,"analysisViewData",void 0),e([i()],a.prototype,"updating",null),e([i()],a.prototype,"_result",null),e([i()],a.prototype,"_geometryUpdateParameters",null),e([i()],a.prototype,"_colorUpdateParameters",null),a=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileLineVisualization2D")],a);let p=class extends c{constructor(t){super(t)}initialize(){const{view:t,analysisViewData:r}=this;this._hoveredPointsVisualization=new b({view:t,analysisViewData:r}),this._inputVisualization=new n({view:t,analysisViewData:r}),this._lineVisualization=new a({view:t,analysisViewData:r})}destroy(){this._inputVisualization.destroy(),this._hoveredPointsVisualization.destroy(),this._lineVisualization.destroy()}get updating(){return this._hoveredPointsVisualization.updating||this._inputVisualization.updating||this._lineVisualization.updating}};e([i()],p.prototype,"view",void 0),e([i()],p.prototype,"analysisViewData",void 0),e([i()],p.prototype,"updating",null),p=e([u("esri.views.2d.analysis.ElevationProfile.ElevationProfileVisualization2D")],p);let s=class extends h{constructor(t){super(t),this.type="elevation-profile-view-2d",this.analysis=null,this.hoveredPosition=null}initialize(){const{analysis:t,view:r}=this;this._controller=new z({analysis:t,analysisViewData:this,view:r,computationFactory:{create:o=>{switch(o.profile.type){case"ground":return new $(o);case"input":return new T(o);case"query":return new k(o);case"scene":throw new g("elevation-profile-analysis-view-2d:unsupported","The scene profile line type is not supported in 2D views.")}}}}),this._visualization=new p({view:r,analysisViewData:this}),this._sketchTool=new O({view:r,analysisViewData:this})}destroy(){this._controller?.destroy(),this._visualization?.destroy(),this._sketchTool?.destroy()}get effectiveDisplayUnits(){return this._controller?.effectiveDisplayUnits??{distance:"meters",elevation:"meters"}}get error(){return this._controller?.error}get hoveredPoints(){return this._controller?.hoveredPoints??[]}get interactive(){return super.interactive}set interactive(t){super.interactive=t}get progress(){return this._controller?.progress??0}get results(){return this._controller?.results??[]}get statistics(){return this._controller?.statistics}get updating(){return this._controller?.updating===!0||this._visualization?.updating===!0||this._sketchTool?.updating===!0}get visible(){return super.visible}set visible(t){super.visible=t}get sketchGraphic(){return this._sketchTool?.sketchGraphic}get toolState(){return this._sketchTool?.state??"idle"}place(t){return this._sketchTool.place(t)}pickFeature(t){return this._sketchTool.pickFeature(t)}};e([i({readOnly:!0})],s.prototype,"type",void 0),e([i({constructOnly:!0,nonNullable:!0})],s.prototype,"analysis",void 0),e([i({readOnly:!0})],s.prototype,"effectiveDisplayUnits",null),e([i({readOnly:!0})],s.prototype,"error",null),e([i()],s.prototype,"hoveredPosition",void 0),e([i()],s.prototype,"hoveredPoints",null),e([i({readOnly:!0})],s.prototype,"progress",null),e([i({readOnly:!0})],s.prototype,"results",null),e([i({readOnly:!0})],s.prototype,"statistics",null),e([i({readOnly:!0})],s.prototype,"updating",null),e([i()],s.prototype,"sketchGraphic",null),e([i()],s.prototype,"toolState",null),e([i()],s.prototype,"_controller",void 0),e([i()],s.prototype,"_visualization",void 0),e([i()],s.prototype,"_sketchTool",void 0),s=e([u("esri.views.2d.analysis.ElevationProfileAnalysisView2D")],s);const ut=s;export{ut as default};
